<div id='user_show'>
<p>
<b><%=h @user.name %></b> (<%=h @user.login %>)<br/>
</p>
<div id='current_accruals'>
        <%= render :partial => '/users/accrued_leave_display',
                   :locals => {:user => @user}  %>
 
</div>
<div id='timesheets'>
  <h4>Timesheets</h4>
  <ul>
  <% @user.timesheets.each do |ts| %>
    <li><%= link_to ts.start_date.strftime("%B %Y"), timesheet_path(ts) %></li>
  <% end %>
  </ul>
</div>
  <div id='leave_requests'>
    <h4>Leave requests</h4>
    <ul>
    <% @user.leave_requests.each do |leave_request| %>
        <% if leave_request.leave_periods.count > 0 %>
            <li><%= link_to "#{leave_request.reason} (#{leave_request.leave_periods.first.from_date.strftime("%x")}
- #{leave_request.leave_periods.last.until_date.strftime("%x")}): #{leave_request.approval_code}", leave_request_path(leave_request)%></li>
        <% end %>

    <% end %>
    </ul>
  </div>
</div>
<br>
<%= link_to 'Edit', edit_user_path(@user) %> |
<%= link_to 'Back', users_path %>
